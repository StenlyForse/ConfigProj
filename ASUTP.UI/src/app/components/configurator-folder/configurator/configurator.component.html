<app-sidebar></app-sidebar>
<div class="budget-page">
    <div class="container">
        <h1 class="budget__title">Новый расчет</h1>
        <div class="control-room">
            <div class="station">
                <div class="io-table__item" >
                    <div class="io-table__item-text">АРМ инженера АСУТП</div>
                    <input class="io-table__item-qty" type="number" placeholder = "0" aria-label="First name">
                </div>
                <img src="../../../assets/img/station.svg" alt="es-station">
            </div>
            <div class="station">
                <div class="io-table__item" >
                    <div class="io-table__item-text">АРМ оператора АСУТП</div>
                    <input class="io-table__item-qty" type="number" placeholder = "0" aria-label="First name">                
                </div>
                <img src="../../../assets/img/station.svg" alt="os-station">
            </div>
        </div>
    
        
        <div class="network">
            Терминальная шина
        </div>
    
        <div class="server">
            <div class="server-workstation">
                <img src="../../../assets/img/server-station.svg" alt="server-workstation">
            </div>
            <div class="io-table__item" >
                <div class="io-table__item-text">АРМ оператора АСУТП</div>
                <input class="io-table__item-qty" type="number" placeholder = "0" aria-label="First name">                
            </div>
        </div>
    
    
        <div class="network">
            Системная шина
        </div>

        <div>
            <div>Резерв, %</div>
            <input class="io-table__item-qty" type="number" placeholder = "0" aria-label="Reserv" (change)="onChangeReserve($event)">
            <div>
                <input type="checkbox" id="dublicating" name="dublicating" (change)="onChangeDublicating($event)" />
                <label for="dublicating">Дублирование</label>
            </div>
        </div>
        <form #form1="ngForm">
            <div class="io-table">
                <div class="io-table__item" *ngFor="let cpuElem of cpu let i = index;">
                    <div class="io-table__item-text">{{cpuElem.name}} </div>
                    <div class="io-table__item-text">{{cpuElem.desc}} </div>
                    <div class="io-table__item-text">{{cpuArr[i].count}} </div>
                </div>
            </div>
        </form>
    <!--План: инпутом собираю все цифры, отправляю в бек с id и названием, там вычленяю делитель, делю и записываю в таблицу Configs с catalogID и в inputCount кол-во штук-->
    <!--потом на отдельной странице выбираю BoundleID и по нему вывожу элементы с описанием из каталога и их кол-во-->
        <form #form2="ngForm">
            <div class="io-table">
                <div class="io-table__item" *ngFor="let catalogElem of controllers let i = index;">
                    <div class="io-table__item-text">{{catalogElem.name}} </div>
                    <div class="io-table__item-text">{{catalogElem.desc}} </div>
                    <input class="io-table__item-qty" type="number" placeholder = "0" aria-label="First name" name="qty_{{i}}" [(ngModel)]="configArr[i].inputCount"
                    [ngModelOptions]="{standalone: true}" (blur)="onInputBlur(i)">
                    <div class="io-table__item-text">{{configArr[i].count}} </div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary" (click)="addConfig()">Создать</button>
        </form>
    </div>
</div>